@model IEnumerable<DataAccess.Models.UserModel>
@using BharatTouch.CommonHelper;
@{
    Layout = "~/Views/Shared/Admin/_LayoutAdmin.cshtml";
    //Layout = null;
    string weburl = System.Configuration.ConfigurationManager.AppSettings["WebUrl"];
}

<style>
    .modal-header .close {
        position: absolute;
        top: 10px;
        right: 10px;
        border: none;
        background: transparent;
    }


    /*--------------------------------------------------------------
    # Pricing
    --------------------------------------------------------------*/
    .pricing .box {
        padding: 40px 20px;
        background: #fff;
        text-align: center;
        box-shadow: 0px 0 30px rgba(1, 41, 112, 0.08);
        border-radius: 4px;
        position: relative;
        overflow: hidden;
        transition: 0.3s;
    }

    /*        .pricing .box:hover {
            transform: scale(1.1);
            box-shadow: 0px 0 30px rgba(1, 41, 112, 0.1);
        }*/

    .pricing h3 {
        font-weight: 700;
        font-size: 18px;
        margin-bottom: 15px;
    }

    .pricing .price {
        font-size: 36px;
        color: #444444;
        font-weight: 600;
        font-family: "Poppins", sans-serif;
    }

        .pricing .price sup {
            font-size: 20px;
            top: -15px;
            left: -3px;
        }

        .pricing .price span {
            color: #bababa;
            font-size: 16px;
            font-weight: 300;
        }

    .pricing img {
        padding: 30px 40px;
    }

    .pricing ul {
        padding: 0;
        list-style: none;
        color: #444444;
        text-align: center;
        line-height: 26px;
        font-size: 16px;
        margin-bottom: 25px;
    }

        .pricing ul li {
            padding-bottom: 10px;
        }

        .pricing ul .na {
            color: #ccc;
            text-decoration: line-through;
        }

    .pricing .btn-buy {
        display: inline-block;
        padding: 8px 40px 10px 40px;
        border-radius: 50px;
        color: #4154f1;
        transition: none;
        font-size: 16px;
        font-weight: 400;
        font-family: "Nunito", sans-serif;
        font-weight: 600;
        transition: 0.3s;
        border: 1px solid #4154f1;
    }

        .pricing .btn-buy:hover {
            background: #4154f1;
            color: #fff;
        }

    .pricing .featured {
        width: 200px;
        position: absolute;
        top: 18px;
        right: -68px;
        transform: rotate(45deg);
        z-index: 1;
        font-size: 14px;
        padding: 1px 0 3px 0;
        background: #4154f1;
        color: #fff;
    }

    .pricing.mainPricing ul li {
        border-bottom: 1px solid #c9bebe !important;
    }
</style>
<input type="hidden" id="hdnSelectedUserId" />

<div class="pagetitle">
    <h1>User</h1>
    <nav>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="#">Home</a></li>
            <li class="breadcrumb-item">User List</li>
        </ol>
    </nav>
</div>

<section>
    <div class="card">
        <div class="card-body">

            <div class="row">
                <div>
                    <button type="button" id="btnAddNewUserByAdmin" class="btn btn-success float-end mx-2"><i class="bi bi-plus-circle-dotted me-1"></i>Add New User</button>

                </div>
                <br />
                <br />
                <table class="table table-bordered table-striped" cellspacing="0" style="width:100%!important;" id="tableUser_Admin">
                    <thead class="mb-none">

                        <tr>
                            <th>
                                #
                            </th>
                            <th>
                                Name
                            </th>

                            <th>
                                Email
                            </th>
                            <th>
                                Password
                            </th>
                            <th>
                                Phone
                            </th>

                            <th>
                                Page Viewed
                            </th>
                            <th>
                                User Reffered
                            </th>
                            <th>
                                Reffered By
                            </th>
                            <th>
                                City
                            </th>
                            <th>
                                Order Number
                            </th>
                            <th>
                                Activated
                            </th>
                            <th>
                                Action
                            </th>

                        </tr>
                    </thead>
                </table>
            </div>
        </div>
    </div>

</section>

<section>
    <div id="pageModal" class="modal fade">
        <div class="modal-dialog modal-xl">

            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">User View History</h5>
                    <button type="button" class="close float-end" data-dismiss="modal" aria-label="Close" onclick="$('#pageModal').modal('hide');">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body" style="overflow-y:auto;height:400px;">
                    <div class="col-lg-12 content" data-aos="fade-left" style="padding:20px">
                        <div class="row">
                            <table class="table table-bordered table-striped" cellspacing="0" style="width:100%!important;" id="tableUserHistory_Admin">
                                <thead>
                                    <tr>
                                        <th>
                                            Name
                                        </th>
                                        <th>
                                            IP Address
                                        </th>
                                        <th>
                                            Browser Name
                                        </th>
                                        <th>
                                            Browser Version
                                        </th>
                                        <th>
                                            Platform
                                        </th>
                                        <th>
                                            Date
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section>
    <div id="userReferalCodeModal" class="modal fade">
        <div class="modal-dialog modal-xl">

            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">User Reffered List</h5>
                    <button type="button" class="close float-end" data-dismiss="modal" aria-label="Close" onclick="$('#userReferalCodeModal').modal('hide');">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body" style="overflow-y:auto;height:400px;">
                    <div class="col-lg-12 content" data-aos="fade-left" style="padding:20px">
                        <div class="row">
                            <table class="table table-bordered table-striped" cellspacing="0" style="width:100%!important;" id="tableUserRefferedBy_Admin">
                                <thead>
                                    <tr>
                                        <th>
                                            #
                                        </th>
                                        <th>
                                            Name
                                        </th>
                                        <th>
                                            Email
                                        </th>
                                        <th>
                                            Phone
                                        </th>

                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section>
    <div id="userPackageModal" class="modal fade">
        <div class="modal-dialog modal-xl">

            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Change Plan</h5>
                    <button type="button" class="close float-end" data-dismiss="modal" aria-label="Close" onclick="$('#userPackageModal').modal('hide');">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body" style="overflow-y:auto;">
                    <div class="col-lg-12 content" data-aos="fade-left" style="padding:20px">
                        <div id="updatePackageFormContainer">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section>
    <div id="userPackageHistoryModal" class="modal fade">
        <div class="modal-dialog" style=" min-width: 90vw;">

            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Change Package History</h5>
                    <button type="button" class="close float-end" data-dismiss="modal" aria-label="Close" onclick="$('#userPackageHistoryModal').modal('hide');">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body" style="overflow-y:auto;">
                    <div class="col-lg-12 content" data-aos="fade-left" style="padding:20px">
                        <div class="row">
                            <table class="table table-bordered table-striped" cellspacing="0" style="width:100%!important;" id="tableUsersPackageHistory_Admin">
                                <thead>
                                    <tr>
                                        <th>
                                            #
                                        </th>
                                        <th>
                                            Package
                                        </th>
                                        <th>
                                            Package Cost
                                        </th>
                                        <th>
                                            Old Package
                                        </th>
                                        <th>
                                            Old Package Cost
                                        </th>
                                        <th>
                                            User Name
                                        </th>
                                        <th>
                                            Changed By
                                        </th>
                                        <th>
                                            Is Changed By Admin
                                        </th>
                                        <th>
                                            ChangedOn
                                        </th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section>
    <div id="paymentDetailsModal" class="modal fade">
        <div class="modal-dialog modal-xl">

            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Payment Details</h5>
                    <button type="button" class="close float-end" data-dismiss="modal" aria-label="Close" onclick="$('#paymentDetailsModal').modal('hide');">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body" style="overflow-y:auto;">
                    <div class="col-lg-12 content" data-aos="fade-left" style="padding:20px">
                        <div id="paymentDetailsContainer">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<section>
    <div id="orderDetailsModal" class="modal fade">
        <div class="modal-dialog modal-xl">

            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Order Details</h5>
                    <button type="button" class="close float-end" data-dismiss="modal" aria-label="Close" onclick="$('#orderDetailsModal').modal('hide');">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body" style="overflow-y:auto;">
                    <div class="col-lg-12 content" data-aos="fade-left" style="padding:20px">
                        <div id="orderDetailsContainer">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div id="Progressbar" class="myprogressbar fade in" style="z-index: 10000 !important; width: 100%; height: 100%; display: none; opacity: 0.79!important;">
    <img src="~/Content/images/loader/Animation - 1733824612282.gif" style=" text-align: center; margin: 0 0 9px 60px; position: relative; top: 40%; left: 39%; width: 190px;" />
    <br />
</div>

@{
    var modalCategoryModel = new DataAccess.ViewModels.ModalViewModel
    {
        ModalId = "ModalInvoicePreview",
        ModalSize = "modal-lg",
        Title = "Invoice",
        CloseButtonText = "Close",
        PartialViewName = "_adminInvoicePreviewModal"
    };
}
@Html.Partial("~/Views/Shared/Admin/_modal.cshtml", modalCategoryModel)

@{
    var modaladdEditUserByAdmin = new DataAccess.ViewModels.ModalViewModel
    {
        ModalId = "ModaladdEditUserByAdmin",
        ModalSize = "modal-lg",
        Title = "Add/Edit User By Admin",
        CloseButtonText = "Close",
        PrimaryButtonText = "Save",
        PrimaryButtonOnClick = "onSaveUserByAdminClick()",
        ModalStyle = "style=overflow-y:scroll;height:500px;"
    };
}
@Html.Partial("~/Views/Shared/Admin/_modal.cshtml", modaladdEditUserByAdmin)

@section scripts{
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script> @*Test for download html to pdf*@
    <link href="~/FormAssets/vendor/icofont/icofont.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.7.570/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.7.570/pdf.worker.min.js"></script>
    <script src="~/Content/page-scripts/Admin/UserIndex.js"></script>

    <script type="text/javascript">
        var user = new listUser_admin();
        user.getUserUrl = "@Url.Action("GetUsers", "Admin")";
        user.deleteUserUrl = "@Url.Action("Delete_User", "Admin")";
        user.getAllUserHistory = "@Url.Action("GetAllUserHistory", "Admin")";
        user.getUserReferredByCode = "@Url.Action("GetUserReferredByCode", "Admin")";
        user.updateUserStatus = "@Url.Action("UpdateUserStatus", "Admin")";
        user.packageModal = "@Url.Action("OpenPackageModal", "Admin")";
        user.paymentDetailsModalUrl = "@Url.Action("OpenPaymentDetailsModal", "Admin")";
        user.orderDetailsModalUrl = "@Url.Action("GetOrderDetailsByOrderNo", "Admin")";
        user.updatePackage = "@Url.Action("UpdatePackage", "Admin")";
        user.getPackageHistoryByUserId = "@Url.Action("GetPackageHistoryByUserId", "Admin")";
        user.GenerateInvoiceUrl = "@Url.Action("GenerateInvoice", "Admin")";
        user.SendInvoiceEmailToUser = "@Url.Action("SendInvoiceEmailToUser", "Admin")";
        user.SaveInvoicePdf = "@Url.Action("SaveInvoicePdf", "Admin")";
        user.addEditUserByAdmin = "@Url.Action("AddEditUserByAdmin", "Admin")";
        user.pageSize = 10;
        user.weburl = "@weburl";
        user.init();
    </script>
}
